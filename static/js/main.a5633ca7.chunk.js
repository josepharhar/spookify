(this.webpackJsonpspookify=this.webpackJsonpspookify||[]).push([[0],{17:function(e,t,r){"use strict";var i=function(e){if(!e)throw new Error("No builder supplied to constructor");this.host=e.host,this.port=e.port,this.scheme=e.scheme,this.queryParameters=e.queryParameters,this.bodyParameters=e.bodyParameters,this.headers=e.headers,this.path=e.path};i.prototype._getter=function(e){return function(){return this[e]}},i.prototype.getHost=i.prototype._getter("host"),i.prototype.getPort=i.prototype._getter("port"),i.prototype.getScheme=i.prototype._getter("scheme"),i.prototype.getPath=i.prototype._getter("path"),i.prototype.getQueryParameters=i.prototype._getter("queryParameters"),i.prototype.getBodyParameters=i.prototype._getter("bodyParameters"),i.prototype.getHeaders=i.prototype._getter("headers"),i.prototype.getURI=function(){if(!this.scheme||!this.host||!this.port)throw new Error("Missing components necessary to construct URI");var e=this.scheme+"://"+this.host;return("http"===this.scheme&&80!==this.port||"https"===this.scheme&&443!==this.port)&&(e+=":"+this.port),this.path&&(e+=this.path),e},i.prototype.getURL=function(){var e=this.getURI();return this.getQueryParameters()?e+this.getQueryParameterString(this.getQueryParameters()):e},i.prototype.getQueryParameterString=function(){var e=this.getQueryParameters();if(e)return"?"+Object.keys(e).filter((function(t){return void 0!==e[t]})).map((function(t){return t+"="+e[t]})).join("&")},i.prototype.execute=function(e,t){if(!t){var r=this;return new Promise((function(t,i){e(r,(function(e,r){e?i(e):t(r)}))}))}e(this,t)};var n=function(){};n.prototype._setter=function(e){return function(t){return this[e]=t,this}},n.prototype.withHost=n.prototype._setter("host"),n.prototype.withPort=n.prototype._setter("port"),n.prototype.withScheme=n.prototype._setter("scheme"),n.prototype.withPath=n.prototype._setter("path"),n.prototype._assigner=function(e){return function(){for(var t=0;t<arguments.length;t++)this[e]=this._assign(this[e],arguments[t]);return this}},n.prototype.withQueryParameters=n.prototype._assigner("queryParameters"),n.prototype.withBodyParameters=n.prototype._assigner("bodyParameters"),n.prototype.withHeaders=n.prototype._assigner("headers"),n.prototype.withAuth=function(e){return e&&this.withHeaders({Authorization:"Bearer "+e}),this},n.prototype._assign=function(e,t){return t&&Array.isArray(t)||t&&"string"===typeof t?t:t&&Object.keys(t).length>0?Object.assign(e||{},t):e},n.prototype.build=function(){return new i(this)},e.exports.builder=function(){return new n}},22:function(e,t,r){e.exports=r(32)},28:function(e,t,r){},29:function(e,t,r){},30:function(e,t,r){},32:function(e,t,r){"use strict";r(33);var i=r(34),n=r(35);function s(e){this._credentials=e||{}}s.prototype={setCredentials:function(e){for(var t in e)e.hasOwnProperty(t)&&(this._credentials[t]=e[t])},getCredentials:function(){return this._credentials},resetCredentials:function(){this._credentials=null},setClientId:function(e){this._setCredential("clientId",e)},setClientSecret:function(e){this._setCredential("clientSecret",e)},setAccessToken:function(e){this._setCredential("accessToken",e)},setRefreshToken:function(e){this._setCredential("refreshToken",e)},setRedirectURI:function(e){this._setCredential("redirectUri",e)},getRedirectURI:function(){return this._getCredential("redirectUri")},getClientId:function(){return this._getCredential("clientId")},getClientSecret:function(){return this._getCredential("clientSecret")},getAccessToken:function(){return this._getCredential("accessToken")},getRefreshToken:function(){return this._getCredential("refreshToken")},resetClientId:function(){this._resetCredential("clientId")},resetClientSecret:function(){this._resetCredential("clientSecret")},resetAccessToken:function(){this._resetCredential("accessToken")},resetRefreshToken:function(){this._resetCredential("refreshToken")},resetRedirectURI:function(){this._resetCredential("redirectUri")},_setCredential:function(e,t){this._credentials=this._credentials||{},this._credentials[e]=t},_getCredential:function(e){return this._credentials?this._credentials[e]:void 0},_resetCredential:function(e){this._credentials&&(this._credentials[e]=null)},getTrack:function(e,t,r){return i.builder(this.getAccessToken()).withPath("/v1/tracks/"+e).withQueryParameters(t).build().execute(n.get,r)},getTracks:function(e,t,r){return i.builder(this.getAccessToken()).withPath("/v1/tracks").withQueryParameters({ids:e.join(",")},t).build().execute(n.get,r)},getAlbum:function(e,t,r){return i.builder(this.getAccessToken()).withPath("/v1/albums/"+e).withQueryParameters(t).build().execute(n.get,r)},getAlbums:function(e,t,r){return i.builder(this.getAccessToken()).withPath("/v1/albums").withQueryParameters({ids:e.join(",")},t).build().execute(n.get,r)},getArtist:function(e,t){return i.builder(this.getAccessToken()).withPath("/v1/artists/"+e).build().execute(n.get,t)},getArtists:function(e,t){return i.builder(this.getAccessToken()).withPath("/v1/artists").withQueryParameters({ids:e.join(",")}).build().execute(n.get,t)},search:function(e,t,r,s){return i.builder(this.getAccessToken()).withPath("/v1/search/").withQueryParameters({type:t.join(","),q:e},r).build().execute(n.get,s)},searchAlbums:function(e,t,r){return this.search(e,["album"],t,r)},searchArtists:function(e,t,r){return this.search(e,["artist"],t,r)},searchTracks:function(e,t,r){return this.search(e,["track"],t,r)},searchPlaylists:function(e,t,r){return this.search(e,["playlist"],t,r)},getArtistAlbums:function(e,t,r){return i.builder(this.getAccessToken()).withPath("/v1/artists/"+e+"/albums").withQueryParameters(t).build().execute(n.get,r)},getAlbumTracks:function(e,t,r){return i.builder(this.getAccessToken()).withPath("/v1/albums/"+e+"/tracks").withQueryParameters(t).build().execute(n.get,r)},getArtistTopTracks:function(e,t,r){return i.builder(this.getAccessToken()).withPath("/v1/artists/"+e+"/top-tracks").withQueryParameters({country:t}).build().execute(n.get,r)},getArtistRelatedArtists:function(e,t){return i.builder(this.getAccessToken()).withPath("/v1/artists/"+e+"/related-artists").build().execute(n.get,t)},getUser:function(e,t){return i.builder(this.getAccessToken()).withPath("/v1/users/"+encodeURIComponent(e)).build().execute(n.get,t)},getMe:function(e){return i.builder(this.getAccessToken()).withPath("/v1/me").build().execute(n.get,e)},getUserPlaylists:function(e,t,r){var s;return"string"===typeof e?s="/v1/users/"+encodeURIComponent(e)+"/playlists":"object"===typeof e?(r=t,t=e,s="/v1/me/playlists"):s="/v1/me/playlists",i.builder(this.getAccessToken()).withPath(s).withQueryParameters(t).build().execute(n.get,r)},getPlaylist:function(e,t,r){return i.builder(this.getAccessToken()).withPath("/v1/playlists/"+e).withQueryParameters(t).build().execute(n.get,r)},getPlaylistTracks:function(e,t,r){return i.builder(this.getAccessToken()).withPath("/v1/playlists/"+e+"/tracks").withQueryParameters(t).build().execute(n.get,r)},createPlaylist:function(e,t,r){return i.builder(this.getAccessToken()).withPath("/v1/me/playlists").withHeaders({"Content-Type":"application/json"}).withBodyParameters({name:e},t).build().execute(n.post,r)},followPlaylist:function(e,t,r){return i.builder(this.getAccessToken()).withPath("/v1/playlists/"+e+"/followers").withHeaders({"Content-Type":"application/json"}).withBodyParameters(t).build().execute(n.put,r)},unfollowPlaylist:function(e,t){return i.builder(this.getAccessToken()).withPath("/v1/playlists/"+e+"/followers").build().execute(n.del,t)},changePlaylistDetails:function(e,t,r){return i.builder(this.getAccessToken()).withPath("/v1/playlists/"+e).withHeaders({"Content-Type":"application/json"}).withBodyParameters(t).build().execute(n.put,r)},uploadCustomPlaylistCoverImage:function(e,t,r){return i.builder(this.getAccessToken()).withPath("/v1/playlists/"+e+"/images").withHeaders({"Content-Type":"image/jpeg"}).withBodyParameters(t).build().execute(n.put,r)},addTracksToPlaylist:function(e,t,r,s){return i.builder(this.getAccessToken()).withPath("/v1/playlists/"+e+"/tracks").withHeaders({"Content-Type":"application/json"}).withQueryParameters(r).withBodyParameters({uris:t}).build().execute(n.post,s)},removeTracksFromPlaylist:function(e,t,r,s){return i.builder(this.getAccessToken()).withPath("/v1/playlists/"+e+"/tracks").withHeaders({"Content-Type":"application/json"}).withBodyParameters({tracks:t},r).build().execute(n.del,s)},removeTracksFromPlaylistByPosition:function(e,t,r,s){return i.builder(this.getAccessToken()).withPath("/v1/playlists/"+e+"/tracks").withHeaders({"Content-Type":"application/json"}).withBodyParameters({positions:t,snapshot_id:r}).build().execute(n.del,s)},replaceTracksInPlaylist:function(e,t,r){return i.builder(this.getAccessToken()).withPath("/v1/playlists/"+e+"/tracks").withHeaders({"Content-Type":"application/json"}).withBodyParameters({uris:t}).build().execute(n.put,r)},reorderTracksInPlaylist:function(e,t,r,s,a){var c=void 0;if(s&&s.uris){c="";for(var o=0;o<s.uris.length;o++)o&&(c+=","),c+=s.uris[o];s.uris=void 0}return console.log("uris:",c),i.builder(this.getAccessToken()).withPath("/v1/playlists/"+e+"/tracks").withHeaders({"Content-Type":"application/json"}).withQueryParameters({uris:c}).withBodyParameters({range_start:t,insert_before:r},s).build().execute(n.put,a)},getAudioFeaturesForTrack:function(e,t){return i.builder(this.getAccessToken()).withPath("/v1/audio-features/"+e).build().execute(n.get,t)},getAudioAnalysisForTrack:function(e,t){return i.builder(this.getAccessToken()).withPath("/v1/audio-analysis/"+e).build().execute(n.get,t)},getAudioFeaturesForTracks:function(e,t){return i.builder(this.getAccessToken()).withPath("/v1/audio-features").withQueryParameters({ids:e.join(",")}).build().execute(n.get,t)},getRecommendations:function(e,t){var r={},s=["seed_artists","seed_genres","seed_tracks"];for(var a in e)e.hasOwnProperty(a)&&(-1!==s.indexOf(a)&&"[object Array]"===Object.prototype.toString.call(e[a])?r[a]=e[a].join(","):r[a]=e[a]);return i.builder(this.getAccessToken()).withPath("/v1/recommendations").withQueryParameters(r).build().execute(n.get,t)},getAvailableGenreSeeds:function(e){return i.builder(this.getAccessToken()).withPath("/v1/recommendations/available-genre-seeds").build().execute(n.get,e)},getMySavedTracks:function(e,t){return i.builder(this.getAccessToken()).withPath("/v1/me/tracks").withQueryParameters(e).build().execute(n.get,t)},containsMySavedTracks:function(e,t){return i.builder(this.getAccessToken()).withPath("/v1/me/tracks/contains").withQueryParameters({ids:e.join(",")}).build().execute(n.get,t)},removeFromMySavedTracks:function(e,t){return i.builder(this.getAccessToken()).withPath("/v1/me/tracks").withHeaders({"Content-Type":"application/json"}).withBodyParameters({ids:e}).build().execute(n.del,t)},addToMySavedTracks:function(e,t){return i.builder(this.getAccessToken()).withPath("/v1/me/tracks").withHeaders({"Content-Type":"application/json"}).withBodyParameters({ids:e}).build().execute(n.put,t)},removeFromMySavedAlbums:function(e,t){return i.builder(this.getAccessToken()).withPath("/v1/me/albums").withHeaders({"Content-Type":"application/json"}).withBodyParameters(e).build().execute(n.del,t)},addToMySavedAlbums:function(e,t){return i.builder(this.getAccessToken()).withPath("/v1/me/albums").withHeaders({"Content-Type":"application/json"}).withBodyParameters(e).build().execute(n.put,t)},getMySavedAlbums:function(e,t){return i.builder(this.getAccessToken()).withPath("/v1/me/albums").withQueryParameters(e).build().execute(n.get,t)},containsMySavedAlbums:function(e,t){return i.builder(this.getAccessToken()).withPath("/v1/me/albums/contains").withQueryParameters({ids:e.join(",")}).build().execute(n.get,t)},getMyTopArtists:function(e,t){return i.builder(this.getAccessToken()).withPath("/v1/me/top/artists").withQueryParameters(e).build().execute(n.get,t)},getMyTopTracks:function(e,t){return i.builder(this.getAccessToken()).withPath("/v1/me/top/tracks").withQueryParameters(e).build().execute(n.get,t)},getMyRecentlyPlayedTracks:function(e,t){return i.builder(this.getAccessToken()).withPath("/v1/me/player/recently-played").withQueryParameters(e).build().execute(n.get,t)},addToQueue:function(e,t,r){return i.builder(this.getAccessToken()).withPath("/v1/me/player/queue").withQueryParameters({uri:e},t).build().execute(n.post,r)},getMyDevices:function(e){return i.builder(this.getAccessToken()).withPath("/v1/me/player/devices").build().execute(n.get,e)},getMyCurrentPlayingTrack:function(e,t){return i.builder(this.getAccessToken()).withPath("/v1/me/player/currently-playing").withQueryParameters(e).build().execute(n.get,t)},getMyCurrentPlaybackState:function(e,t){return i.builder(this.getAccessToken()).withPath("/v1/me/player").withQueryParameters(e).build().execute(n.get,t)},transferMyPlayback:function(e,t,r){return i.builder(this.getAccessToken()).withPath("/v1/me/player").withHeaders({"Content-Type":"application/json"}).withBodyParameters({device_ids:e},t).build().execute(n.put,r)},play:function(e,t){var r=e||{},s=r.device_id?{device_id:r.device_id}:null,a={};return["context_uri","uris","offset","position_ms"].forEach((function(e){e in r&&(a[e]=r[e])})),i.builder(this.getAccessToken()).withPath("/v1/me/player/play").withQueryParameters(s).withHeaders({"Content-Type":"application/json"}).withBodyParameters(a).build().execute(n.put,t)},pause:function(e,t){return i.builder(this.getAccessToken()).withPath("/v1/me/player/pause").withQueryParameters(e&&e.device_id?{device_id:e.device_id}:null).withHeaders({"Content-Type":"application/json"}).build().execute(n.put,t)},skipToPrevious:function(e,t){return i.builder(this.getAccessToken()).withPath("/v1/me/player/previous").withQueryParameters(e&&e.device_id?{device_id:e.device_id}:null).build().execute(n.post,t)},skipToNext:function(e,t){return i.builder(this.getAccessToken()).withPath("/v1/me/player/next").withQueryParameters(e&&e.device_id?{device_id:e.device_id}:null).build().execute(n.post,t)},seek:function(e,t,r){var s={position_ms:e};return t&&"device_id"in t&&(s.device_id=t.device_id),i.builder(this.getAccessToken()).withPath("/v1/me/player/seek").withQueryParameters(s).build().execute(n.put,r)},setRepeat:function(e,t,r){var s={state:e};return t&&"device_id"in t&&(s.device_id=t.device_id),i.builder(this.getAccessToken()).withPath("/v1/me/player/repeat").withQueryParameters(s).build().execute(n.put,r)},setShuffle:function(e,t,r){var s={state:e};return t&&"device_id"in t&&(s.device_id=t.device_id),i.builder(this.getAccessToken()).withPath("/v1/me/player/shuffle").withQueryParameters(s).build().execute(n.put,r)},setVolume:function(e,t,r){var s={volume_percent:e};return t&&"device_id"in t&&(s.device_id=t.device_id),i.builder(this.getAccessToken()).withPath("/v1/me/player/volume").withQueryParameters(s).build().execute(n.put,r)},followUsers:function(e,t){return i.builder(this.getAccessToken()).withPath("/v1/me/following").withQueryParameters({ids:e.join(","),type:"user"}).build().execute(n.put,t)},followArtists:function(e,t){return i.builder(this.getAccessToken()).withPath("/v1/me/following").withQueryParameters({ids:e.join(","),type:"artist"}).build().execute(n.put,t)},unfollowUsers:function(e,t){return i.builder(this.getAccessToken()).withPath("/v1/me/following").withQueryParameters({ids:e.join(","),type:"user"}).build().execute(n.del,t)},unfollowArtists:function(e,t){return i.builder(this.getAccessToken()).withPath("/v1/me/following").withQueryParameters({ids:e.join(","),type:"artist"}).build().execute(n.del,t)},isFollowingUsers:function(e,t){return i.builder(this.getAccessToken()).withPath("/v1/me/following/contains").withQueryParameters({ids:e.join(","),type:"user"}).build().execute(n.get,t)},getFollowedArtists:function(e,t){return i.builder(this.getAccessToken()).withPath("/v1/me/following").withQueryParameters({type:"artist"},e).build().execute(n.get,t)},areFollowingPlaylist:function(e,t,r,s){return i.builder(this.getAccessToken()).withPath("/v1/users/"+encodeURIComponent(e)+"/playlists/"+t+"/followers/contains").withQueryParameters({ids:r.join(",")}).build().execute(n.get,s)},isFollowingArtists:function(e,t){return i.builder(this.getAccessToken()).withPath("/v1/me/following/contains").withQueryParameters({ids:e.join(","),type:"artist"}).build().execute(n.get,t)},getNewReleases:function(e,t){return i.builder(this.getAccessToken()).withPath("/v1/browse/new-releases").withQueryParameters(e).build().execute(n.get,t)},getFeaturedPlaylists:function(e,t){return i.builder(this.getAccessToken()).withPath("/v1/browse/featured-playlists").withQueryParameters(e).build().execute(n.get,t)},getCategories:function(e,t){return i.builder(this.getAccessToken()).withPath("/v1/browse/categories").withQueryParameters(e).build().execute(n.get,t)},getCategory:function(e,t,r){return i.builder(this.getAccessToken()).withPath("/v1/browse/categories/"+e).withQueryParameters(t).build().execute(n.get,r)},getPlaylistsForCategory:function(e,t,r){return i.builder(this.getAccessToken()).withPath("/v1/browse/categories/"+e+"/playlists").withQueryParameters(t).build().execute(n.get,r)},getShow:function(e,t,r){return i.builder(this.getAccessToken()).withPath("/v1/shows/"+e).withQueryParameters(t).build().execute(n.get,r)},getShows:function(e,t,r){return i.builder(this.getAccessToken()).withPath("/v1/shows").withQueryParameters({ids:e.join(",")},t).build().execute(n.get,r)},containsMySavedShows:function(e,t){return i.builder(this.getAccessToken()).withPath("/v1/me/shows/contains").withQueryParameters({ids:e.join(",")}).build().execute(n.get,t)},removeFromMySavedShows:function(e,t){return i.builder(this.getAccessToken()).withPath("/v1/me/shows").withHeaders({"Content-Type":"application/json"}).withBodyParameters(e).build().execute(n.del,t)},addToMySavedShows:function(e,t){return i.builder(this.getAccessToken()).withPath("/v1/me/shows").withHeaders({"Content-Type":"application/json"}).withBodyParameters(e).build().execute(n.put,t)},getMySavedShows:function(e,t){return i.builder(this.getAccessToken()).withPath("/v1/me/shows").withQueryParameters(e).build().execute(n.get,t)},getShowEpisodes:function(e,t,r){return i.builder(this.getAccessToken()).withPath("/v1/shows/"+e+"/episodes").withQueryParameters(t).build().execute(n.get,r)},searchShows:function(e,t,r){return this.search(e,["show"],t,r)},searchEpisodes:function(e,t,r){return this.search(e,["episode"],t,r)},getEpisode:function(e,t,r){return i.builder(this.getAccessToken()).withPath("/v1/episodes/"+e).withQueryParameters(t).build().execute(n.get,r)},getEpisodes:function(e,t,r){return i.builder(this.getAccessToken()).withPath("/v1/episodes").withQueryParameters({ids:e.join(",")},t).build().execute(n.get,r)}},s._addMethods=function(e){for(var t in e)e.hasOwnProperty(t)&&(this.prototype[t]=e[t])},e.exports=s},33:function(e,t,r){"use strict";var i=r(17);e.exports.builder=function(){return i.builder().withHost("accounts.spotify.com").withPort(443).withScheme("https")}},34:function(e,t,r){"use strict";var i=r(17);e.exports.builder=function(e){return i.builder().withHost("api.spotify.com").withPort(443).withScheme("https").withAuth(e)}},35:function(e,t,r){"use strict";var i=r(36),n=r(46),s=n.TimeoutError,a=n.WebapiError,c=n.WebapiRegularError,o=n.WebapiAuthenticationError,u=n.WebapiPlayerError,l={},h=function(e){var t={};return e.getQueryParameters()&&(t.query=e.getQueryParameters()),e.getHeaders()&&"application/json"===e.getHeaders()["Content-Type"]?t.data=JSON.stringify(e.getBodyParameters()):e.getBodyParameters()&&(t.data=e.getBodyParameters()),e.getHeaders()&&(t.headers=e.getHeaders()),t};l._makeRequest=function(e,t,r,n){var l=e.bind(i)(r);t.query&&l.query(t.query),t.headers&&l.set(t.headers),t.data&&l.send(t.data),l.end((function(e,t){return e?e.timeout?n(new s):e.response?n(function(e){return"object"===typeof e.body&&e.body.error&&"object"===typeof e.body.error&&e.body.error.reason?new u(e.body,e.headers,e.statusCode):"object"===typeof e.body&&e.body.error&&"object"===typeof e.body.error?new c(e.body,e.headers,e.statusCode):"object"===typeof e.body&&e.body.error&&"string"===typeof e.body.error?new o(e.body,e.headers,e.statusCode):new a(e.body,e.headers,e.statusCode,e.body)}(e.response)):n(e):n(null,{body:t.body,headers:t.headers,statusCode:t.statusCode})}))},l.get=function(e,t){var r=h(e),n=i.get;l._makeRequest(n,r,e.getURI(),t)},l.post=function(e,t){var r=h(e),n=i.post;l._makeRequest(n,r,e.getURI(),t)},l.del=function(e,t){var r=h(e),n=i.del;l._makeRequest(n,r,e.getURI(),t)},l.put=function(e,t){var r=h(e),n=i.put;l._makeRequest(n,r,e.getURI(),t)},e.exports=l},46:function(e,t,r){var i=r(47),n=r(48),s=r(49),a=r(50),c=function(e){"use strict";s(r,e);var t=a(r);function r(){return i(this,r),t.apply(this,arguments)}return n(r,[{key:"name",get:function(){return this.constructor.name}}]),r}(r(54)(Error)),o=function(e){"use strict";s(r,e);var t=a(r);function r(){i(this,r);return t.call(this,"A timeout occurred while communicating with Spotify's Web API.")}return r}(c),u=function(e){"use strict";s(r,e);var t=a(r);function r(e,n,s,a){var c;return i(this,r),(c=t.call(this,a)).body=e,c.headers=n,c.statusCode=s,c}return r}(c),l=function(e){"use strict";s(r,e);var t=a(r);function r(e,n,s){i(this,r);var a="An error occurred while communicating with Spotify's Web API.\nDetails: "+e.error.message+".";return t.call(this,e,n,s,a)}return r}(u),h=function(e){"use strict";s(r,e);var t=a(r);function r(e,n,s){i(this,r);var a="An authentication error occurred while communicating with Spotify's Web API.\nDetails: "+e.error+(e.error_description?" "+e.error_description+".":".");return t.call(this,e,n,s,a)}return r}(u),d=function(e){"use strict";s(r,e);var t=a(r);function r(e,n,s){i(this,r);var a="An error occurred while communicating with Spotify's Web API.\nDetails: "+e.error.message+(e.error.reason?" "+e.error.reason+".":".");return t.call(this,e,n,s,a)}return r}(u);e.exports={WebapiError:u,TimeoutError:o,WebapiRegularError:l,WebapiAuthenticationError:h,WebapiPlayerError:d}},59:function(e,t,r){"use strict";r.r(t);var i=r(2),n=r.n(i),s=r(3),a=r(1),c=r.n(a),o=r(15),u=r.n(o),l=(r(28),r(5)),h=r(6),d=r(8),p=r(7),y=(r(29),r(30),r(0)),f=function(e){Object(d.a)(r,e);var t=Object(p.a)(r);function r(e){return Object(l.a)(this,r),t.call(this,e)}return Object(h.a)(r,[{key:"render",value:function(){return Object(y.jsx)("div",{className:"split-widget",children:this.props.children})}}]),r}(c.a.Component),b=r(4);function g(e,t){return e.operands.length!==t?"".concat(e.operator," should have operands of length ").concat(t,", but instead got ").concat(e.operands.length):null}var v=r(61),w=r(22),m="",k="",P=new(r.n(w).a);function x(e){return j.apply(this,arguments)}function j(){return(j=Object(s.a)(n.a.mark((function e(t){var r;return n.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return m=t,P.setAccessToken(m),e.prev=2,e.next=5,P.getMe();case 5:r=e.sent,k=r.body.id,e.next=13;break;case 9:return e.prev=9,e.t0=e.catch(2),alert("access_token expired, log in again to get a new one."),e.abrupt("return",!1);case 13:return e.abrupt("return",!0);case 14:case"end":return e.stop()}}),e,null,[[2,9]])})))).apply(this,arguments)}function T(){return A.apply(this,arguments)}function A(){return(A=Object(s.a)(n.a.mark((function e(){var t,r,i,s,a,c;return n.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:t=[],i=0;case 2:return e.next=4,P.getUserPlaylists(k,{limit:50,offset:i});case 4:r=e.sent,s=Object(b.a)(r.body.items);try{for(s.s();!(a=s.n()).done;)c=a.value,t.push(c)}catch(n){s.e(n)}finally{s.f()}i+=r.body.items.length;case 8:if(r.body.next){e.next=2;break}case 9:return e.abrupt("return",t);case 10:case"end":return e.stop()}}),e)})))).apply(this,arguments)}var O=null;function C(){return S.apply(this,arguments)}function S(){return(S=Object(s.a)(n.a.mark((function e(){return n.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(O){e.next=4;break}return e.next=3,T();case 3:O=e.sent;case 4:return e.abrupt("return",O);case 5:case"end":return e.stop()}}),e)})))).apply(this,arguments)}var _=new Map;function I(e){return R.apply(this,arguments)}function R(){return(R=Object(s.a)(n.a.mark((function e(t){var r,i,s;return n.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:r=[],s=0;case 2:return e.next=4,P.getPlaylistTracks(t,{limit:50,offset:s});case 4:i=e.sent,r=r.concat(i.body.items),s+=i.body.items.length;case 7:if(i.body.next){e.next=2;break}case 8:return e.abrupt("return",r);case 9:case"end":return e.stop()}}),e)})))).apply(this,arguments)}function Q(e){return E.apply(this,arguments)}function E(){return(E=Object(s.a)(n.a.mark((function e(t){return n.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(_.has(t)){e.next=7;break}return e.t0=_,e.t1=t,e.next=5,I(t);case 5:e.t2=e.sent,e.t0.set.call(e.t0,e.t1,e.t2);case 7:return e.abrupt("return",_.get(t));case 8:case"end":return e.stop()}}),e)})))).apply(this,arguments)}var B=null;function M(){return H.apply(this,arguments)}function H(){return(H=Object(s.a)(n.a.mark((function e(){return n.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(B){e.next=4;break}return e.next=3,U();case 3:B=e.sent;case 4:return e.abrupt("return",B);case 5:case"end":return e.stop()}}),e)})))).apply(this,arguments)}function U(){return N.apply(this,arguments)}function N(){return(N=Object(s.a)(n.a.mark((function e(){var t,r,i;return n.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:t=[],r=0;case 2:return e.next=4,P.getMySavedTracks({limit:50,offset:r});case 4:i=e.sent,t=t.concat(i.body.items),r+=i.body.items.length;case 7:if(i.body.next){e.next=2;break}case 8:return e.abrupt("return",t);case 9:case"end":return e.stop()}}),e)})))).apply(this,arguments)}function F(e,t){return D.apply(this,arguments)}function D(){return(D=Object(s.a)(n.a.mark((function e(t,r){var i,s,a;return n.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:i=r.map((function(e){return e.uri})),s=50,a=0;case 3:if(!(a<r.length)){e.next=10;break}return e.next=6,P.reorderTracksInPlaylist(t,0,a,{uris:i.slice(a,a+s)});case 6:e.sent;case 7:a+=s,e.next=3;break;case 10:case"end":return e.stop()}}),e)})))).apply(this,arguments)}var q=function(e){Object(d.a)(r,e);var t=Object(p.a)(r);function r(e){var i;return Object(l.a)(this,r),(i=t.call(this,e)).playlistsAlphabetical=void 0,i.editorType=void 0,i.recipe=void 0,i.errorText=void 0,i.editorType="gui",i.recipe=e.initialRecipe,i.errorText=null,i.playlistsAlphabetical=null,Object(s.a)(n.a.mark((function e(){return n.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,C();case 2:i.playlistsAlphabetical=e.sent,i.setState({playlistsAlphabetical:i.playlistsAlphabetical});case 4:case"end":return e.stop()}}),e)})))(),i}return Object(h.a)(r,[{key:"renderGui",value:function(){var e=this;return Object(y.jsx)("div",{children:Object(y.jsx)("div",{children:this.playlistsAlphabetical?Object(y.jsxs)("div",{children:[Object(y.jsxs)("div",{className:"border",children:[Object(y.jsx)("span",{children:"Name: "}),Object(y.jsx)("input",{value:this.recipe.name,onChange:function(t){return e.handleNameChanged(t.target.value)}})]}),Object(y.jsxs)("div",{className:"border",children:[Object(y.jsx)("span",{children:"Target output playlist:"}),Object(y.jsx)(v.a,{value:this.recipe.targetPlaylistId,options:this.getPlaylistsAsSelectOptions(),placeholder:"Choose a playlist",search:!0,onChange:function(t){return e.handleTargetPlaylistChanged(t)}}),Object(y.jsx)("span",{children:"id: "}),Object(y.jsx)("input",{disabled:!0,value:this.recipe?this.recipe.targetPlaylistId:""})]}),this.recipe.steps.map((function(t,r){return Object(y.jsxs)("div",{className:"border",children:[Object(y.jsx)("span",{children:"Step type:"}),Object(y.jsx)(v.a,{value:t.operator,options:["appendPlaylistById","filterByPlaylistId","filterBySavedTracks"].map((function(e){return{name:e,value:e}})),onChange:function(t){return e.handleStepTypeModified(r,t)}}),e.renderGuiStepOperators(t,r)]})})),Object(y.jsx)("div",{className:"border",children:Object(y.jsx)("button",{onClick:function(){return e.handleAddNewStep()},children:"Add a new step"})})]}):Object(y.jsx)("span",{children:"Loading playlists..."})})})}},{key:"renderGuiStepOperators",value:function(e,t){var r=this;switch(e.operator){case"appendPlaylistById":case"filterByPlaylistId":return Object(y.jsxs)("div",{children:[Object(y.jsx)("span",{children:"Playlist to append:"}),Object(y.jsx)(v.a,{value:e.operands[0],options:this.getPlaylistsAsSelectOptions(),placeholder:"Choose a playlist",search:!0,onChange:function(e){return r.handleAppendStepModified(t,e)}})]});case"filterBySavedTracks":return null;default:return Object(y.jsx)("span",{children:"unknown: "+e.operator})}}},{key:"handleNameChanged",value:function(e){this.recipe.name=e,this.recipeChanged()}},{key:"handleTargetPlaylistChanged",value:function(e){Array.isArray(e)?console.error("selected option is an array?",e):"string"===typeof e?(this.recipe.targetPlaylistId=e,this.recipeChanged()):console.error("selected option is not a string:",e)}},{key:"handleStepTypeModified",value:function(e,t){"string"===typeof t?(this.recipe.steps[e].operator=t,this.recipe.steps[e].operands=[],this.recipeChanged()):console.error("selected option is not a sring:",t)}},{key:"handleAddNewStep",value:function(){this.recipe.steps.push({operator:"appendPlaylistById",operands:["playlistId"]}),this.recipeChanged(),console.log("added step",this)}},{key:"handleAppendStepModified",value:function(e,t){"string"===typeof t?(this.recipe.steps[e].operands[0]=t,this.recipeChanged()):console.error("handleAppendStepModified value isnt a string:",t)}},{key:"getPlaylistsAsSelectOptions",value:function(){if(!this.playlistsAlphabetical)return console.error("getSelectOptions this.playlistsAlphabetical hasnt loaded yet!",this),[];var e,t=[],r=Object(b.a)(this.playlistsAlphabetical);try{for(r.s();!(e=r.n()).done;){var i=e.value;t.push({name:i.name,value:i.id})}}catch(n){r.e(n)}finally{r.f()}return t}},{key:"renderText",value:function(){var e=this;return console.log("this.errortext: ",this.errorText),Object(y.jsxs)("div",{children:[Object(y.jsx)("textarea",{defaultValue:JSON.stringify(this.recipe,null,2),onChange:function(t){return e.handleRenderTextChange(t)},cols:60,rows:30}),this.errorText?Object(y.jsxs)("div",{className:"error",children:["error: ",this.errorText]}):""]})}},{key:"handleRenderTextChange",value:function(e){var t=function(e){try{var t=JSON.parse(e);if(!t.targetPlaylistId)return"no targetPlaylistId";if(!t.steps)return"no steps;";var r,i=Object(b.a)(t.steps);try{for(i.s();!(r=i.n()).done;){var n=r.value;if(!(n.operands instanceof Array))return"no operands array";var s=void 0;switch(n.operator){case"appendPlaylistById":case"filterByPlaylistId":if(s=g(n,1))return s;break;case"filterBySavedTracks":if(s=g(n,0))return s;break;default:return"unrecognized operator: "+n.operator}}}catch(a){i.e(a)}finally{i.f()}return t.name?t:"no name"}catch(s){return"failed to parse recipe: "+s}}(e.target.value);console.log("parsedRecipe:",t),"string"===typeof t?(this.errorText=t,this.setState({errorText:t})):(this.errorText=null,this.setState({errorText:null}),this.recipe=t,this.recipeChanged())}},{key:"setEditorType",value:function(e){this.editorType=e,this.setState({editorType:this.editorType})}},{key:"render",value:function(){return Object(y.jsxs)("div",{children:[Object(y.jsxs)("div",{children:[Object(y.jsx)("button",{onClick:this.setEditorType.bind(this,"gui"),disabled:"gui"===this.editorType,children:"GUI"}),Object(y.jsx)("button",{onClick:this.setEditorType.bind(this,"text"),disabled:"text"===this.editorType,children:"Text"})]}),"text"===this.editorType?this.renderText():this.renderGui()]})}},{key:"recipeChanged",value:function(){this.setState({recipe:this.recipe}),this.props.onRecipeChanged(this.recipe)}}]),r}(c.a.Component);function W(e){return L.apply(this,arguments)}function L(){return(L=Object(s.a)(n.a.mark((function e(t){var r,i,s,a;return n.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:r=[],i=Object(b.a)(t.steps),e.prev=2,i.s();case 4:if((s=i.n()).done){e.next=9;break}return a=s.value,e.delegateYield(n.a.mark((function e(){var t,i,s;return n.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:e.t0=a.operator,e.next="appendPlaylistById"===e.t0?3:"filterByPlaylistId"===e.t0?12:"filterBySavedTracks"===e.t0?19:24;break;case 3:if(a.operands&&a.operands[0]){e.next=5;break}throw new Error("invalid step: "+JSON.stringify(a));case 5:return t=a.operands[0],e.t1=r,e.next=9,Q(t);case 9:return e.t2=e.sent.map((function(e){return e.track})),r=e.t1.concat.call(e.t1,e.t2),e.abrupt("break",25);case 12:if(a.operands&&a.operands[0]){e.next=14;break}throw new Error("invalid step: "+JSON.stringify(a));case 14:return e.next=16,Q(a.operands[0]);case 16:return i=e.sent.map((function(e){return e.track.id})),r=r.filter((function(e){return i.includes(e.id)})),e.abrupt("break",25);case 19:return e.next=21,M();case 21:return s=e.sent.map((function(e){return e.track.id})),r=r.filter((function(e){return s.includes(e.id)})),e.abrupt("break",25);case 24:throw new Error("unrecognized operator: "+a.operator);case 25:case"end":return e.stop()}}),e)}))(),"t0",7);case 7:e.next=4;break;case 9:e.next=14;break;case 11:e.prev=11,e.t1=e.catch(2),i.e(e.t1);case 14:return e.prev=14,i.f(),e.finish(14);case 17:return e.abrupt("return",r);case 18:case"end":return e.stop()}}),e,null,[[2,11,14,17]])})))).apply(this,arguments)}var J=function(e){Object(d.a)(r,e);var t=Object(p.a)(r);function r(e){var i;return Object(l.a)(this,r),(i=t.call(this,e)).currentEditor=null,i.currentRecipeIndex=void 0,i.recipes=void 0,i.consoleLines=void 0,i.recipesServer=void 0,i.recipesDirty=void 0,i.currentEditor=null,i.recipes=[],i.currentRecipeIndex=-1,i.consoleLines=[],i.recipesServer=localStorage.getItem("recipesServer")||"",i.recipesDirty=!1,i}return Object(h.a)(r,[{key:"newRecipe",value:function(){this.setState({recipes:this.recipes.push({name:"my-new-recipe",targetPlaylistId:"playlistId",steps:[]})})}},{key:"handleRecipeChanged",value:function(e){this.recipes[this.currentRecipeIndex]=e,this.setState({recipes:this.recipes}),this.recipesDirty=!0}},{key:"handleEditRecipe",value:function(e,t){var r=Object(y.jsx)(q,{initialRecipe:e,onRecipeChanged:this.handleRecipeChanged.bind(this)});console.log("newEditor:",r),this.currentEditor=r,this.currentRecipeIndex=t,this.setState({currentEditor:r,currentRecipeIndex:t})}},{key:"handleRunRecipe",value:function(){var e=Object(s.a)(n.a.mark((function e(t){var r;return n.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return console.log("running recipe...",t),e.next=3,W(t);case 3:return r=e.sent,console.log("finished running recipe",t),e.next=7,F(t.targetPlaylistId,r);case 7:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}()},{key:"handleDeleteRecipe",value:function(e){window.confirm('Are you sure you want to delete "'+this.recipes[e].name+'"?')&&(this.currentRecipeIndex===e&&(this.currentRecipeIndex=-1,this.currentEditor=null),this.recipes.splice(e,1),console.log("deleting recipe",this),this.setState({recipes:this.recipes,currentRecipeIndex:this.currentRecipeIndex,currentEditor:this.currentRecipeIndex}))}},{key:"render",value:function(){var e=this;return console.log("render this.currentEditor",this.currentEditor),Object(y.jsxs)("div",{children:[Object(y.jsxs)(f,{children:[this.renderRecipesList(),this.currentEditor?this.currentEditor:""]}),Object(y.jsxs)("div",{className:"border",children:[Object(y.jsx)("h3",{children:"Settings"}),Object(y.jsxs)("div",{children:[Object(y.jsx)("span",{children:"Recipes server (optional):"}),Object(y.jsx)("input",{value:this.recipesServer,onChange:function(t){return e.recipesServerChanged(t.target.value)}}),Object(y.jsxs)("button",{onClick:function(){return e.pushToRecipesServer()},children:["Save",this.recipesDirty?"*":""]}),Object(y.jsx)("button",{onClick:function(){return e.loadFromRecipesServer()},children:"Load"})]})]})]})}},{key:"recipesServerChanged",value:function(e){localStorage.setItem("recipesServer",e),this.recipesServer=e,this.setState({recipesServer:this.recipesServer})}},{key:"loadFromRecipesServer",value:function(){var e=Object(s.a)(n.a.mark((function e(){var t,r;return n.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(this.recipesServer){e.next=2;break}return e.abrupt("return");case 2:return e.next=4,fetch(this.recipesServer);case 4:if((t=e.sent).ok){e.next=8;break}return console.error("loadFromRecipesServer fetch failed:",t),e.abrupt("return");case 8:return e.next=10,t.json();case 10:r=e.sent,this.recipes=r,this.setState({recipes:this.recipes}),console.log("loaded new recipes:",r,t);case 14:case"end":return e.stop()}}),e,this)})));return function(){return e.apply(this,arguments)}}()},{key:"pushToRecipesServer",value:function(){var e=Object(s.a)(n.a.mark((function e(){var t;return n.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(this.recipesServer){e.next=2;break}return e.abrupt("return");case 2:return this.recipesDirty=!1,this.setState({recipesDirty:this.recipesDirty}),e.next=6,fetch(this.recipesServer,{method:"POST",headers:{"content-type":"application/json"},mode:"cors",body:JSON.stringify(this.recipes,null,2)});case 6:(t=e.sent).ok||console.error("recipe server fetch failed:",t);case 8:case"end":return e.stop()}}),e,this)})));return function(){return e.apply(this,arguments)}}()},{key:"renderRecipesList",value:function(){var e=this;return Object(y.jsxs)("div",{children:[Object(y.jsx)("div",{children:"TODO run all recipes button"}),Object(y.jsx)("button",{onClick:function(){return e.newRecipe()},children:"New recipe"}),Object(y.jsx)("ul",{children:this.recipes.map((function(t,r){return Object(y.jsxs)("li",{children:[t.name,Object(y.jsxs)("div",{children:[Object(y.jsx)("button",{onClick:e.handleEditRecipe.bind(e,t,r),children:"Edit"}),Object(y.jsx)("button",{onClick:e.handleRunRecipe.bind(e,t),children:"Run"}),Object(y.jsx)("button",{onClick:e.handleDeleteRecipe.bind(e,r),children:"Delete"})]})]})}))})]})}}]),r}(c.a.Component),G=function(e){Object(d.a)(r,e);var t=Object(p.a)(r);function r(e){var i;return Object(l.a)(this,r),(i=t.call(this,e)).state=void 0,i.state={clientId:localStorage.getItem("clientId")||""},i}return Object(h.a)(r,[{key:"handleClientIdChange",value:function(e){var t=e.target.value;this.setState({clientId:t}),localStorage.setItem("clientId",t)}},{key:"handleLogin",value:function(){if(this.state.clientId){var e=["ugc-image-upload","user-read-playback-state","user-modify-playback-state","user-read-currently-playing","streaming","app-remote-control","user-read-email","user-read-private","playlist-read-collaborative","playlist-modify-public","playlist-read-private","playlist-modify-private","user-library-modify","user-library-read","user-top-read","user-read-playback-position","user-read-recently-played","user-follow-read","user-follow-modify"].join(" ");window.location.href="https://accounts.spotify.com/authorize?response_type=token"+"&client_id=".concat(encodeURIComponent(this.state.clientId))+"&scope=".concat(e)+"&redirect_uri=".concat(encodeURIComponent(window.location.origin+"/"))}else alert("Client ID is required")}},{key:"render",value:function(){return Object(y.jsxs)("div",{children:[Object(y.jsx)("label",{htmlFor:"clientId",children:"Client ID"}),Object(y.jsx)("input",{name:"clientId",value:this.state.clientId,onChange:this.handleClientIdChange.bind(this)}),Object(y.jsx)("div",{children:Object(y.jsx)("button",{onClick:this.handleLogin.bind(this),children:"Login"})})]})}}]),r}(c.a.Component);Object(s.a)(n.a.mark((function e(){var t,r,i;return n.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(!(t=window.location.search).includes("access_token")&&window.location.hash.includes("access_token")&&(t=window.location.hash.replace("#","?")),r=new URLSearchParams(t),i=r.get("access_token"),r.get("token_type"),r.get("expires_in"),console.log("accessToken: "+i),e.t0=!i,e.t0){e.next=12;break}return e.next=11,x(i);case 11:e.t0=!e.sent;case 12:if(!e.t0){e.next=15;break}return u.a.render(Object(y.jsx)(c.a.StrictMode,{children:Object(y.jsx)(G,{})}),document.getElementById("root")),e.abrupt("return");case 15:u.a.render(Object(y.jsx)(c.a.StrictMode,{children:Object(y.jsx)(J,{})}),document.getElementById("root"));case 16:case"end":return e.stop()}}),e)})))()}},[[59,1,2]]]);
//# sourceMappingURL=main.a5633ca7.chunk.js.map